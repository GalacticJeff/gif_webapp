(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{180:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),i=a.n(o),s=(a(90),a(4)),c=a(5),l=a(8),u=a(6),h=a(9),d=a(17),m=a(21),p=a(7),f=a(20),g=a(75),v=a(15),b=a(54),E={isAuthenticated:!1,user:{},loading:!1},O={},w=(a(54),{data:{},favorites:{},existData:!1,existHistory:!1,existFavorites:!1,loading:!1}),y=Object(f.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(v.a)({},e,{isAuthenticated:!b(t.payload),user:t.payload});case"USER_LOADING":return Object(v.a)({},e,{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_DATA":return Object(v.a)({},e,{data:t.payload,existData:!0});case"SEARCH_LOADING":return Object(v.a)({},e,{loading:!e.loading});case"GET_FAVORITES":return Object(v.a)({},e,{favorites:t.payload,existFavorites:!0});case"GET_HISTORY":return Object(v.a)({},e,{history:t.payload,existHistory:!0});default:return e}}}),j=[g.a],x=Object(f.e)(y,{},Object(f.d)(f.a.apply(void 0,j),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),S=a(19),N=a.n(S),k=function(e){e?N.a.defaults.headers.common.token=e:delete N.a.defaults.headers.common.token},I=a(34),_=a.n(I),R=function(e){return{type:"SET_CURRENT_USER",payload:e}},C=function(){return{type:"USER_LOADING"}},T=function(){return function(e){localStorage.removeItem("jwtToken"),k(!1),e(R({}))}},D=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={errors:{}},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleLogOut",value:function(e){e.preventDefault(),this.props.logoutUser()}},{key:"render",value:function(){var e=this,t=this.props.auth;return console.log(t),r.a.createElement("div",{className:"navbar"},r.a.createElement("nav",{className:"z-depth-0"},r.a.createElement("div",{className:"nav-wrapper blue accent-3"},r.a.createElement(d.b,{to:"/dashboard",className:"brand-logo"},r.a.createElement("i",{className:"material-icons"},"code"),"Gifty App"),t.isAuthenticated?r.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement("a",null,r.a.createElement(d.b,{to:"/favorites"},"Favorite")," ")),r.a.createElement("li",null,r.a.createElement("a",null,r.a.createElement(d.b,{to:"/history"},"History")," ")),r.a.createElement("li",null,r.a.createElement("a",{onClick:function(t){return e.handleLogOut(t)}},r.a.createElement(d.b,{to:"/history"},"LogOut")," "))):null)))}}]),t}(n.Component),L=Object(p.b)(function(e){return{auth:e.auth}},{logoutUser:T})(D),A=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align"},r.a.createElement("h4",null,r.a.createElement("b",null,"App")," to search and store gifs!"," ",r.a.createElement("span",{style:{fontFamily:"monospace"}},"MERN")," stack from scratch"),r.a.createElement("br",null),r.a.createElement("div",{className:"col s12"},r.a.createElement(d.b,{to:"/login",style:{width:"140px",borderRadius:"3px",letterSpacing:"1.5px"},className:"btn btn-large btn-flat waves-effect white black-text"},"Log In")))))}}]),t}(n.Component),G=a(26),F=a(49),H=a.n(F),U=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.setState(Object(G.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e.state={email:"",password:"",errors:{}},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{style:{marginTop:"4rem"},className:"row"},r.a.createElement("div",{className:"col s8 offset-s2"},r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Login")," below")),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",className:H()("",{invalid:e.email||e.emailnotfound})}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("span",{className:"red-text"},e.email,e.emailnotfound)),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",className:H()("",{invalid:e.password||e.passwordincorrect})}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("span",{className:"red-text"},e.password,e.passwordincorrect)),r.a.createElement("div",{className:"col s12",style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Login"))))))}}]),t}(n.Component),z=Object(p.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){C(),N.a.post("http://localhost/auth/login",e).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),k(a);var n=_()(a);t(R(n))}).catch(function(e){return t({type:"GET_ERRORS",payload:e.response.data})})}}})(U),W=a(25),M=Object(p.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(W.a)(e,["component","auth"]);return r.a.createElement(m.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(m.a,{to:"/login"})}}))}),q=a(29),P=function(e){return{type:"GET_HISTORY",payload:e}},V=function(e){return{type:"SEARCH_DATA",payload:e}},B=function(e){return{type:"GET_FAVORITES",payload:e}},X=function(){return{type:"SEARCH_LOADING"}},J=a(35),K=a(22),Y=a(1),$=a.n(Y),Q=function(e){e.currentView;var t=e.modalProps,a=t.onClose,n=t.onSave;return $()("div",{css:{alignItems:"center",backgroundColor:"white",boxShadow:"0 1px 0 rgba(0, 0, 0, 0.1)",display:"flex ",flex:"0 0 auto",height:54,justifyContent:"space-between"}},$()("div",{css:{alignItems:"center",display:"flex ",minWidth:0}},$()("img",{css:{borderRadius:3,flexShrink:0,height:32,marginRight:8,width:32}}),$()("div",{css:{fontSize:"0.85em",minWidth:0}},$()("div",{css:{fontWeight:500}}),$()("div",{css:{marginTop:"0.25em",minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}))),$()("div",{css:{alignItems:"center",display:"flex "}},$()(Z,{onClick:n},$()("span",{css:{backgroundColor:"white",borderRadius:8,display:"inline-block",fontSize:"0.7em",fontWeight:500,lineHeight:1,marginRight:-12,marginTop:8,padding:"1px 4px",position:"relative"}}),$()(ae,null)),$()(Z,{onClick:a,css:{borderLeft:"1px solid",paddingLeft:10}},$()(te,null))))},Z=function(e){var t=e.css,a=Object(W.a)(e,["css"]);return $()("div",Object.assign({css:Object(v.a)({alignItems:"center",cursor:"pointer",display:"flex ",fontWeight:300,height:32,justifyContent:"center",marginLeft:10,position:"relative",textAlign:"center",minWidth:32,"&:hover, &:active":{}},t),role:"button"},a))},ee=function(e){var t=e.size,a=Object(W.a)(e,["size"]);return $()("svg",Object.assign({role:"presentation",viewBox:"0 0 24 24",css:{display:"inline-block",fill:"currentColor",height:t,stroke:"currentColor",strokeWidth:0,width:t}},a))},te=function(e){var t=e.size,a=void 0===t?24:t,n=Object(W.a)(e,["size"]);return $()(ee,Object.assign({size:a},n),$()("path",{d:"M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"}))},ae=function(e){var t=e.size,a=void 0===t?24:t,n=Object(W.a)(e,["size"]);return $()(ee,Object.assign({size:a},n),$()("path",{d:"M12.094 18.563c4.781-4.313 7.922-7.172 7.922-10.078 0-2.016-1.5-3.469-3.516-3.469-1.547 0-3.047 0.984-3.563 2.344h-1.875c-0.516-1.359-2.016-2.344-3.563-2.344-2.016 0-3.516 1.453-3.516 3.469 0 2.906 3.141 5.766 7.922 10.078l0.094 0.094zM16.5 3c3.094 0 5.484 2.391 5.484 5.484 0 3.797-3.375 6.844-8.531 11.531l-1.453 1.313-1.453-1.266c-5.156-4.688-8.531-7.781-8.531-11.578 0-3.094 2.391-5.484 5.484-5.484 1.734 0 3.422 0.844 4.5 2.109 1.078-1.266 2.766-2.109 4.5-2.109z"}))},ne=a(51),re=a.n(ne),oe=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onLogoutClick=function(t){t.preventDefault(),e.props.logoutUser()},e.searchGif=function(t){t.preventDefault(),e.props.searchGif(e.state.query)},e.openLightbox=function(t,a){t.preventDefault(),e.setState({currentImage:a.index,viewIsOpen:!0})},e.closeLightbox=function(t){t.preventDefault(),e.setState({currentImage:0,viewIsOpen:!1})},e.saveGif=function(e){console.log(e)},e.state={query:"",currentImage:0,viewIsOpen:!1,errors:{}},e.handleSearchInput=e.handleSearchInput.bind(Object(q.a)(e)),e.saveGif=e.saveGif.bind(Object(q.a)(e)),e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleSearchInput",value:function(e){e.preventDefault(),this.setState(Object(G.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this,t=this.props.auth.user,a=[],n=[],o=this.props.search,i=o.data,s=o.existData;re()("body").on("dblclick","img.react-images__view-image",function(e){e.stopImmediatePropagation(),re.a.ajax({type:"POST",headers:{token:localStorage.getItem("jwtToken")},url:"http://localhost/v1/gif/favorites/save",data:{id_gif:e.target.currentSrc},success:function(e){alert("Gif saved")},error:function(e){console.log(e)}})});var c={header:function(e,t){return Object(v.a)({},e,{color:t.isFullscreen?"red":"blue",padding:20})}};return s&&i.map(function(e,t){a[t]={src:e.images.original_still.url,width:Math.round(e.images.original_still.width),height:Math.round(e.images.original_still.height)},n[t]={src:e.images.original.url,width:Math.round(e.images.original.width),height:Math.round(e.images.original.height)}}),r.a.createElement("div",{style:{height:"50vh"},className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align"},r.a.createElement("h4",null,r.a.createElement("b",null,"Hey there,")," ",t.name.split(" ")[0],r.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"Start looking for some cool gifs! \ud83d\udc4f")),r.a.createElement("form",null,r.a.createElement("div",{className:"input-field row"},r.a.createElement("input",{name:"query",id:"search",type:"search",onChange:function(t){return e.handleSearchInput(t)},required:!0}),r.a.createElement("i",{className:"material-icons"},"close"))),r.a.createElement("button",{style:{width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem"},onClick:this.searchGif,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Search")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement(J.a,{photos:a,onClick:function(t,a){return e.openLightbox(t,a)}})))),r.a.createElement(K.b,null,this.state.viewIsOpen?r.a.createElement(K.a,{onClose:function(t){return e.closeLightbox(t)},onShow:function(t){return e.saveGif(t)}},r.a.createElement(K.c,{currentIndex:this.state.currentImage,views:n,styles:c,components:{Header:function(e){var t=e.innerProps;return e.isModal?r.a.createElement("div",t,Q):null}}})):null))}}]),t}(n.Component),ie=Object(p.b)(function(e){return{auth:e.auth,search:e.search}},{logoutUser:T,searchGif:function(e){return function(t){t(X()),N.a.get("http://localhost/v1/gif/search/".concat(e)).then(function(e){var a=e.data.data;console.log(e),t(V(a))}).catch(function(e){return t({type:"GET_ERRORS",payload:e.response.data})})}}})(oe),se=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).getFavorites=function(t){t.preventDefault(),e.props.getFavorites()},e.openLightbox=function(t,a){t.preventDefault(),e.setState({currentImage:a.index,viewIsOpen:!0})},e.closeLightbox=function(t){t.preventDefault(),e.setState({currentImage:0,viewIsOpen:!1})},e.state={query:"",currentImage:0,viewIsOpen:!1,errors:{}},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.getFavorites()}},{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props.auth.user,a=[],n=this.props.search,o=n.favorites;return n.existFavorites&&o.data.map(function(e,t){console.log(e),a[t]={src:e.id_gif}}),r.a.createElement("div",{style:{height:"50vh"},className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("h4",null,t.name.split(" ")[0],"'s favorite gifs",r.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"'Double click to save gifs'! \ud83d\udc4f")),r.a.createElement(J.a,{photos:a,onClick:function(t,a){return e.openLightbox(t,a)}}))),r.a.createElement(K.b,null,this.state.viewIsOpen?r.a.createElement(K.a,{onClose:function(t){return e.closeLightbox(t)},onShow:function(t){return e.saveGif(t)}},r.a.createElement(K.c,{currentIndex:this.state.currentImage,views:a})):null))}}]),t}(n.Component),ce=Object(p.b)(function(e){return{auth:e.auth,search:e.search}},{getFavorites:function(){return function(e){e(X()),N.a.get("http://localhost/v1/gif/favorites/get").then(function(t){console.log(t.data),e(B(t.data))}).catch(function(e){return console.log(e)})}}})(se),le=a(80),ue=a.n(le),he=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).getFavorites=function(t){t.preventDefault(),e.props.getFavorites()},e.openLightbox=function(t,a){t.preventDefault(),e.setState({currentImage:a.index,viewIsOpen:!0})},e.closeLightbox=function(t){t.preventDefault(),e.setState({currentImage:0,viewIsOpen:!1})},e.state={query:{},currentImage:0,viewIsOpen:!1,errors:{}},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.getHistory()}},{key:"componentWillReceiveProps",value:function(e){this.setState({query:{id:1,title:"Conan the Barbarian",year:"1982"}}),this.forceUpdate()}},{key:"render",value:function(){var e=this.props.auth.user,t=this.props.search,a=t.history,n=t.existHistory;return n&&a.data.map(function(e,t){console.log(e.id),e[t]={id:e.id,search_log:e.search_log,created_at:e.created_at}}),console.log(a),r.a.createElement("div",{style:{height:"50vh"},className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("h4",null,e.name.split(" ")[0],"'s keyword search log"),n?r.a.createElement(ue.a,{title:"Keyword log",columns:[{name:"Id",selector:"id",sortable:!0},{name:"Keyword",selector:"search_log",sortable:!0},{name:"Search_date",selector:"created_at",sortable:!0}],data:a.data}):null)))}}]),t}(n.Component),de=Object(p.b)(function(e){return{auth:e.auth,search:e.search}},{getHistory:function(){return function(e){e(X()),N.a.get("http://localhost/v1/gif/history").then(function(t){console.log(t.data),e(P(t.data))}).catch(function(e){return console.log(e)})}}})(he);if(localStorage.jwtToken){var me=localStorage.jwtToken;k(me);var pe=_()(me);console.log(pe),x.dispatch(R(pe));var fe=Date.now()/1e3;pe.exp<fe&&(x.dispatch(T()),window.location.href="./login")}var ge=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:x},r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(L,null),r.a.createElement(m.b,{exact:!0,path:"/",component:A}),r.a.createElement(m.b,{exact:!0,path:"/login",component:z}),r.a.createElement(m.d,null,r.a.createElement(M,{exact:!0,path:"/dashboard",component:ie}),r.a.createElement(M,{exact:!0,path:"/history",component:de}),r.a.createElement(M,{exact:!0,path:"/favorites",component:ce})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},85:function(e,t,a){e.exports=a(180)},90:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.1309a9f6.chunk.js.map